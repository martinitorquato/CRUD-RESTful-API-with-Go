<div id="gist97984786" class="gist"> <div class="gist-file"> <div class="gist-data"> <div class="js-gist-file-update-container js-task-list-container file-box"> <div id="file-users_controllers-go" class="file my-2"> <div itemprop="text" class="Box-body p-0 blob-wrapper data type-go "> <table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip> <tr> <td id="file-users_controllers-go-L1" class="blob-num js-line-number" data-line-number="1"></td> <td id="file-users_controllers-go-LC1" class="blob-code blob-code-inner js-file-line"><span class=pl-k>package</span> controllers</td> </tr> <tr> <td id="file-users_controllers-go-L2" class="blob-num js-line-number" data-line-number="2"></td> <td id="file-users_controllers-go-LC2" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L3" class="blob-num js-line-number" data-line-number="3"></td> <td id="file-users_controllers-go-LC3" class="blob-code blob-code-inner js-file-line"><span class=pl-k>import</span> (</td> </tr> <tr> <td id="file-users_controllers-go-L4" class="blob-num js-line-number" data-line-number="4"></td> <td id="file-users_controllers-go-LC4" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;encoding/json&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L5" class="blob-num js-line-number" data-line-number="5"></td> <td id="file-users_controllers-go-LC5" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;errors&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L6" class="blob-num js-line-number" data-line-number="6"></td> <td id="file-users_controllers-go-LC6" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;fmt&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L7" class="blob-num js-line-number" data-line-number="7"></td> <td id="file-users_controllers-go-LC7" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;io/ioutil&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L8" class="blob-num js-line-number" data-line-number="8"></td> <td id="file-users_controllers-go-LC8" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;net/http&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L9" class="blob-num js-line-number" data-line-number="9"></td> <td id="file-users_controllers-go-LC9" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;strconv&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L10" class="blob-num js-line-number" data-line-number="10"></td> <td id="file-users_controllers-go-LC10" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L11" class="blob-num js-line-number" data-line-number="11"></td> <td id="file-users_controllers-go-LC11" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;github.com/gorilla/mux&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L12" class="blob-num js-line-number" data-line-number="12"></td> <td id="file-users_controllers-go-LC12" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;github.com/victorsteven/fullstack/api/auth&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L13" class="blob-num js-line-number" data-line-number="13"></td> <td id="file-users_controllers-go-LC13" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;github.com/victorsteven/fullstack/api/models&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L14" class="blob-num js-line-number" data-line-number="14"></td> <td id="file-users_controllers-go-LC14" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;github.com/victorsteven/fullstack/api/responses&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L15" class="blob-num js-line-number" data-line-number="15"></td> <td id="file-users_controllers-go-LC15" class="blob-code blob-code-inner js-file-line"> <span class=pl-s>&quot;github.com/victorsteven/fullstack/api/utils/formaterror&quot;</span></td> </tr> <tr> <td id="file-users_controllers-go-L16" class="blob-num js-line-number" data-line-number="16"></td> <td id="file-users_controllers-go-LC16" class="blob-code blob-code-inner js-file-line">)</td> </tr> <tr> <td id="file-users_controllers-go-L17" class="blob-num js-line-number" data-line-number="17"></td> <td id="file-users_controllers-go-LC17" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L18" class="blob-num js-line-number" data-line-number="18"></td> <td id="file-users_controllers-go-LC18" class="blob-code blob-code-inner js-file-line"><span class=pl-k>func</span> (<span class=pl-s1>server</span> <span class=pl-c1>*</span><span class=pl-smi>Server</span>) <span class=pl-en>CreateUser</span>(<span class=pl-s1>w</span> http.<span class=pl-smi>ResponseWriter</span>, <span class=pl-s1>r</span> <span class=pl-c1>*</span>http.<span class=pl-smi>Request</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L19" class="blob-num js-line-number" data-line-number="19"></td> <td id="file-users_controllers-go-LC19" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L20" class="blob-num js-line-number" data-line-number="20"></td> <td id="file-users_controllers-go-LC20" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>body</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>ioutil</span>.<span class=pl-en>ReadAll</span>(<span class=pl-s1>r</span>.<span class=pl-c1>Body</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L21" class="blob-num js-line-number" data-line-number="21"></td> <td id="file-users_controllers-go-LC21" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L22" class="blob-num js-line-number" data-line-number="22"></td> <td id="file-users_controllers-go-LC22" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L23" class="blob-num js-line-number" data-line-number="23"></td> <td id="file-users_controllers-go-LC23" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L24" class="blob-num js-line-number" data-line-number="24"></td> <td id="file-users_controllers-go-LC24" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span> <span class=pl-c1>:=</span> models.<span class=pl-smi>User</span>{}</td> </tr> <tr> <td id="file-users_controllers-go-L25" class="blob-num js-line-number" data-line-number="25"></td> <td id="file-users_controllers-go-LC25" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>err</span> <span class=pl-c1>=</span> <span class=pl-s1>json</span>.<span class=pl-en>Unmarshal</span>(<span class=pl-s1>body</span>, <span class=pl-c1>&amp;</span><span class=pl-s1>user</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L26" class="blob-num js-line-number" data-line-number="26"></td> <td id="file-users_controllers-go-LC26" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L27" class="blob-num js-line-number" data-line-number="27"></td> <td id="file-users_controllers-go-LC27" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L28" class="blob-num js-line-number" data-line-number="28"></td> <td id="file-users_controllers-go-LC28" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L29" class="blob-num js-line-number" data-line-number="29"></td> <td id="file-users_controllers-go-LC29" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L30" class="blob-num js-line-number" data-line-number="30"></td> <td id="file-users_controllers-go-LC30" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span>.<span class=pl-en>Prepare</span>()</td> </tr> <tr> <td id="file-users_controllers-go-L31" class="blob-num js-line-number" data-line-number="31"></td> <td id="file-users_controllers-go-LC31" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>err</span> <span class=pl-c1>=</span> <span class=pl-s1>user</span>.<span class=pl-en>Validate</span>(<span class=pl-s>&quot;&quot;</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L32" class="blob-num js-line-number" data-line-number="32"></td> <td id="file-users_controllers-go-LC32" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L33" class="blob-num js-line-number" data-line-number="33"></td> <td id="file-users_controllers-go-LC33" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L34" class="blob-num js-line-number" data-line-number="34"></td> <td id="file-users_controllers-go-LC34" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L35" class="blob-num js-line-number" data-line-number="35"></td> <td id="file-users_controllers-go-LC35" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L36" class="blob-num js-line-number" data-line-number="36"></td> <td id="file-users_controllers-go-LC36" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>userCreated</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>user</span>.<span class=pl-en>SaveUser</span>(<span class=pl-s1>server</span>.<span class=pl-c1>DB</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L37" class="blob-num js-line-number" data-line-number="37"></td> <td id="file-users_controllers-go-LC37" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L38" class="blob-num js-line-number" data-line-number="38"></td> <td id="file-users_controllers-go-LC38" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L39" class="blob-num js-line-number" data-line-number="39"></td> <td id="file-users_controllers-go-LC39" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L40" class="blob-num js-line-number" data-line-number="40"></td> <td id="file-users_controllers-go-LC40" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>formattedError</span> <span class=pl-c1>:=</span> <span class=pl-s1>formaterror</span>.<span class=pl-en>FormatError</span>(<span class=pl-s1>err</span>.<span class=pl-en>Error</span>())</td> </tr> <tr> <td id="file-users_controllers-go-L41" class="blob-num js-line-number" data-line-number="41"></td> <td id="file-users_controllers-go-LC41" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L42" class="blob-num js-line-number" data-line-number="42"></td> <td id="file-users_controllers-go-LC42" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusInternalServerError</span>, <span class=pl-s1>formattedError</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L43" class="blob-num js-line-number" data-line-number="43"></td> <td id="file-users_controllers-go-LC43" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L44" class="blob-num js-line-number" data-line-number="44"></td> <td id="file-users_controllers-go-LC44" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L45" class="blob-num js-line-number" data-line-number="45"></td> <td id="file-users_controllers-go-LC45" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>w</span>.<span class=pl-en>Header</span>().<span class=pl-en>Set</span>(<span class=pl-s>&quot;Location&quot;</span>, <span class=pl-s1>fmt</span>.<span class=pl-en>Sprintf</span>(<span class=pl-s>&quot;%s%s/%d&quot;</span>, <span class=pl-s1>r</span>.<span class=pl-c1>Host</span>, <span class=pl-s1>r</span>.<span class=pl-c1>RequestURI</span>, <span class=pl-s1>userCreated</span>.<span class=pl-c1>ID</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L46" class="blob-num js-line-number" data-line-number="46"></td> <td id="file-users_controllers-go-LC46" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>JSON</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusCreated</span>, <span class=pl-s1>userCreated</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L47" class="blob-num js-line-number" data-line-number="47"></td> <td id="file-users_controllers-go-LC47" class="blob-code blob-code-inner js-file-line">}</td> </tr> <tr> <td id="file-users_controllers-go-L48" class="blob-num js-line-number" data-line-number="48"></td> <td id="file-users_controllers-go-LC48" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L49" class="blob-num js-line-number" data-line-number="49"></td> <td id="file-users_controllers-go-LC49" class="blob-code blob-code-inner js-file-line"><span class=pl-k>func</span> (<span class=pl-s1>server</span> <span class=pl-c1>*</span><span class=pl-smi>Server</span>) <span class=pl-en>GetUsers</span>(<span class=pl-s1>w</span> http.<span class=pl-smi>ResponseWriter</span>, <span class=pl-s1>r</span> <span class=pl-c1>*</span>http.<span class=pl-smi>Request</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L50" class="blob-num js-line-number" data-line-number="50"></td> <td id="file-users_controllers-go-LC50" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L51" class="blob-num js-line-number" data-line-number="51"></td> <td id="file-users_controllers-go-LC51" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span> <span class=pl-c1>:=</span> models.<span class=pl-smi>User</span>{}</td> </tr> <tr> <td id="file-users_controllers-go-L52" class="blob-num js-line-number" data-line-number="52"></td> <td id="file-users_controllers-go-LC52" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L53" class="blob-num js-line-number" data-line-number="53"></td> <td id="file-users_controllers-go-LC53" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>users</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>user</span>.<span class=pl-en>FindAllUsers</span>(<span class=pl-s1>server</span>.<span class=pl-c1>DB</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L54" class="blob-num js-line-number" data-line-number="54"></td> <td id="file-users_controllers-go-LC54" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L55" class="blob-num js-line-number" data-line-number="55"></td> <td id="file-users_controllers-go-LC55" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusInternalServerError</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L56" class="blob-num js-line-number" data-line-number="56"></td> <td id="file-users_controllers-go-LC56" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L57" class="blob-num js-line-number" data-line-number="57"></td> <td id="file-users_controllers-go-LC57" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L58" class="blob-num js-line-number" data-line-number="58"></td> <td id="file-users_controllers-go-LC58" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>JSON</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusOK</span>, <span class=pl-s1>users</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L59" class="blob-num js-line-number" data-line-number="59"></td> <td id="file-users_controllers-go-LC59" class="blob-code blob-code-inner js-file-line">}</td> </tr> <tr> <td id="file-users_controllers-go-L60" class="blob-num js-line-number" data-line-number="60"></td> <td id="file-users_controllers-go-LC60" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L61" class="blob-num js-line-number" data-line-number="61"></td> <td id="file-users_controllers-go-LC61" class="blob-code blob-code-inner js-file-line"><span class=pl-k>func</span> (<span class=pl-s1>server</span> <span class=pl-c1>*</span><span class=pl-smi>Server</span>) <span class=pl-en>GetUser</span>(<span class=pl-s1>w</span> http.<span class=pl-smi>ResponseWriter</span>, <span class=pl-s1>r</span> <span class=pl-c1>*</span>http.<span class=pl-smi>Request</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L62" class="blob-num js-line-number" data-line-number="62"></td> <td id="file-users_controllers-go-LC62" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L63" class="blob-num js-line-number" data-line-number="63"></td> <td id="file-users_controllers-go-LC63" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>vars</span> <span class=pl-c1>:=</span> <span class=pl-s1>mux</span>.<span class=pl-en>Vars</span>(<span class=pl-s1>r</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L64" class="blob-num js-line-number" data-line-number="64"></td> <td id="file-users_controllers-go-LC64" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>uid</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>strconv</span>.<span class=pl-en>ParseUint</span>(<span class=pl-s1>vars</span>[<span class=pl-s>&quot;id&quot;</span>], <span class=pl-c1>10</span>, <span class=pl-c1>32</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L65" class="blob-num js-line-number" data-line-number="65"></td> <td id="file-users_controllers-go-LC65" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L66" class="blob-num js-line-number" data-line-number="66"></td> <td id="file-users_controllers-go-LC66" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusBadRequest</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L67" class="blob-num js-line-number" data-line-number="67"></td> <td id="file-users_controllers-go-LC67" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L68" class="blob-num js-line-number" data-line-number="68"></td> <td id="file-users_controllers-go-LC68" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L69" class="blob-num js-line-number" data-line-number="69"></td> <td id="file-users_controllers-go-LC69" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span> <span class=pl-c1>:=</span> models.<span class=pl-smi>User</span>{}</td> </tr> <tr> <td id="file-users_controllers-go-L70" class="blob-num js-line-number" data-line-number="70"></td> <td id="file-users_controllers-go-LC70" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>userGotten</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>user</span>.<span class=pl-en>FindUserByID</span>(<span class=pl-s1>server</span>.<span class=pl-c1>DB</span>, <span class=pl-en>uint32</span>(<span class=pl-s1>uid</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L71" class="blob-num js-line-number" data-line-number="71"></td> <td id="file-users_controllers-go-LC71" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L72" class="blob-num js-line-number" data-line-number="72"></td> <td id="file-users_controllers-go-LC72" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusBadRequest</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L73" class="blob-num js-line-number" data-line-number="73"></td> <td id="file-users_controllers-go-LC73" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L74" class="blob-num js-line-number" data-line-number="74"></td> <td id="file-users_controllers-go-LC74" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L75" class="blob-num js-line-number" data-line-number="75"></td> <td id="file-users_controllers-go-LC75" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>JSON</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusOK</span>, <span class=pl-s1>userGotten</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L76" class="blob-num js-line-number" data-line-number="76"></td> <td id="file-users_controllers-go-LC76" class="blob-code blob-code-inner js-file-line">}</td> </tr> <tr> <td id="file-users_controllers-go-L77" class="blob-num js-line-number" data-line-number="77"></td> <td id="file-users_controllers-go-LC77" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L78" class="blob-num js-line-number" data-line-number="78"></td> <td id="file-users_controllers-go-LC78" class="blob-code blob-code-inner js-file-line"><span class=pl-k>func</span> (<span class=pl-s1>server</span> <span class=pl-c1>*</span><span class=pl-smi>Server</span>) <span class=pl-en>UpdateUser</span>(<span class=pl-s1>w</span> http.<span class=pl-smi>ResponseWriter</span>, <span class=pl-s1>r</span> <span class=pl-c1>*</span>http.<span class=pl-smi>Request</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L79" class="blob-num js-line-number" data-line-number="79"></td> <td id="file-users_controllers-go-LC79" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L80" class="blob-num js-line-number" data-line-number="80"></td> <td id="file-users_controllers-go-LC80" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>vars</span> <span class=pl-c1>:=</span> <span class=pl-s1>mux</span>.<span class=pl-en>Vars</span>(<span class=pl-s1>r</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L81" class="blob-num js-line-number" data-line-number="81"></td> <td id="file-users_controllers-go-LC81" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>uid</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>strconv</span>.<span class=pl-en>ParseUint</span>(<span class=pl-s1>vars</span>[<span class=pl-s>&quot;id&quot;</span>], <span class=pl-c1>10</span>, <span class=pl-c1>32</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L82" class="blob-num js-line-number" data-line-number="82"></td> <td id="file-users_controllers-go-LC82" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L83" class="blob-num js-line-number" data-line-number="83"></td> <td id="file-users_controllers-go-LC83" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusBadRequest</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L84" class="blob-num js-line-number" data-line-number="84"></td> <td id="file-users_controllers-go-LC84" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L85" class="blob-num js-line-number" data-line-number="85"></td> <td id="file-users_controllers-go-LC85" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L86" class="blob-num js-line-number" data-line-number="86"></td> <td id="file-users_controllers-go-LC86" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>body</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>ioutil</span>.<span class=pl-en>ReadAll</span>(<span class=pl-s1>r</span>.<span class=pl-c1>Body</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L87" class="blob-num js-line-number" data-line-number="87"></td> <td id="file-users_controllers-go-LC87" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L88" class="blob-num js-line-number" data-line-number="88"></td> <td id="file-users_controllers-go-LC88" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L89" class="blob-num js-line-number" data-line-number="89"></td> <td id="file-users_controllers-go-LC89" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L90" class="blob-num js-line-number" data-line-number="90"></td> <td id="file-users_controllers-go-LC90" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L91" class="blob-num js-line-number" data-line-number="91"></td> <td id="file-users_controllers-go-LC91" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span> <span class=pl-c1>:=</span> models.<span class=pl-smi>User</span>{}</td> </tr> <tr> <td id="file-users_controllers-go-L92" class="blob-num js-line-number" data-line-number="92"></td> <td id="file-users_controllers-go-LC92" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>err</span> <span class=pl-c1>=</span> <span class=pl-s1>json</span>.<span class=pl-en>Unmarshal</span>(<span class=pl-s1>body</span>, <span class=pl-c1>&amp;</span><span class=pl-s1>user</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L93" class="blob-num js-line-number" data-line-number="93"></td> <td id="file-users_controllers-go-LC93" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L94" class="blob-num js-line-number" data-line-number="94"></td> <td id="file-users_controllers-go-LC94" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L95" class="blob-num js-line-number" data-line-number="95"></td> <td id="file-users_controllers-go-LC95" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L96" class="blob-num js-line-number" data-line-number="96"></td> <td id="file-users_controllers-go-LC96" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L97" class="blob-num js-line-number" data-line-number="97"></td> <td id="file-users_controllers-go-LC97" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>tokenID</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>auth</span>.<span class=pl-en>ExtractTokenID</span>(<span class=pl-s1>r</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L98" class="blob-num js-line-number" data-line-number="98"></td> <td id="file-users_controllers-go-LC98" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L99" class="blob-num js-line-number" data-line-number="99"></td> <td id="file-users_controllers-go-LC99" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>, <span class=pl-s1>errors</span>.<span class=pl-en>New</span>(<span class=pl-s>&quot;Unauthorized&quot;</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L100" class="blob-num js-line-number" data-line-number="100"></td> <td id="file-users_controllers-go-LC100" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L101" class="blob-num js-line-number" data-line-number="101"></td> <td id="file-users_controllers-go-LC101" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L102" class="blob-num js-line-number" data-line-number="102"></td> <td id="file-users_controllers-go-LC102" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>tokenID</span> <span class=pl-c1>!=</span> <span class=pl-en>uint32</span>(<span class=pl-s1>uid</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L103" class="blob-num js-line-number" data-line-number="103"></td> <td id="file-users_controllers-go-LC103" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>, <span class=pl-s1>errors</span>.<span class=pl-en>New</span>(<span class=pl-s1>http</span>.<span class=pl-en>StatusText</span>(<span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>)))</td> </tr> <tr> <td id="file-users_controllers-go-L104" class="blob-num js-line-number" data-line-number="104"></td> <td id="file-users_controllers-go-LC104" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L105" class="blob-num js-line-number" data-line-number="105"></td> <td id="file-users_controllers-go-LC105" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L106" class="blob-num js-line-number" data-line-number="106"></td> <td id="file-users_controllers-go-LC106" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span>.<span class=pl-en>Prepare</span>()</td> </tr> <tr> <td id="file-users_controllers-go-L107" class="blob-num js-line-number" data-line-number="107"></td> <td id="file-users_controllers-go-LC107" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>err</span> <span class=pl-c1>=</span> <span class=pl-s1>user</span>.<span class=pl-en>Validate</span>(<span class=pl-s>&quot;update&quot;</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L108" class="blob-num js-line-number" data-line-number="108"></td> <td id="file-users_controllers-go-LC108" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L109" class="blob-num js-line-number" data-line-number="109"></td> <td id="file-users_controllers-go-LC109" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnprocessableEntity</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L110" class="blob-num js-line-number" data-line-number="110"></td> <td id="file-users_controllers-go-LC110" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L111" class="blob-num js-line-number" data-line-number="111"></td> <td id="file-users_controllers-go-LC111" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L112" class="blob-num js-line-number" data-line-number="112"></td> <td id="file-users_controllers-go-LC112" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>updatedUser</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>user</span>.<span class=pl-en>UpdateAUser</span>(<span class=pl-s1>server</span>.<span class=pl-c1>DB</span>, <span class=pl-en>uint32</span>(<span class=pl-s1>uid</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L113" class="blob-num js-line-number" data-line-number="113"></td> <td id="file-users_controllers-go-LC113" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L114" class="blob-num js-line-number" data-line-number="114"></td> <td id="file-users_controllers-go-LC114" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>formattedError</span> <span class=pl-c1>:=</span> <span class=pl-s1>formaterror</span>.<span class=pl-en>FormatError</span>(<span class=pl-s1>err</span>.<span class=pl-en>Error</span>())</td> </tr> <tr> <td id="file-users_controllers-go-L115" class="blob-num js-line-number" data-line-number="115"></td> <td id="file-users_controllers-go-LC115" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusInternalServerError</span>, <span class=pl-s1>formattedError</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L116" class="blob-num js-line-number" data-line-number="116"></td> <td id="file-users_controllers-go-LC116" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L117" class="blob-num js-line-number" data-line-number="117"></td> <td id="file-users_controllers-go-LC117" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L118" class="blob-num js-line-number" data-line-number="118"></td> <td id="file-users_controllers-go-LC118" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>JSON</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusOK</span>, <span class=pl-s1>updatedUser</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L119" class="blob-num js-line-number" data-line-number="119"></td> <td id="file-users_controllers-go-LC119" class="blob-code blob-code-inner js-file-line">}</td> </tr> <tr> <td id="file-users_controllers-go-L120" class="blob-num js-line-number" data-line-number="120"></td> <td id="file-users_controllers-go-LC120" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L121" class="blob-num js-line-number" data-line-number="121"></td> <td id="file-users_controllers-go-LC121" class="blob-code blob-code-inner js-file-line"><span class=pl-k>func</span> (<span class=pl-s1>server</span> <span class=pl-c1>*</span><span class=pl-smi>Server</span>) <span class=pl-en>DeleteUser</span>(<span class=pl-s1>w</span> http.<span class=pl-smi>ResponseWriter</span>, <span class=pl-s1>r</span> <span class=pl-c1>*</span>http.<span class=pl-smi>Request</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L122" class="blob-num js-line-number" data-line-number="122"></td> <td id="file-users_controllers-go-LC122" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L123" class="blob-num js-line-number" data-line-number="123"></td> <td id="file-users_controllers-go-LC123" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>vars</span> <span class=pl-c1>:=</span> <span class=pl-s1>mux</span>.<span class=pl-en>Vars</span>(<span class=pl-s1>r</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L124" class="blob-num js-line-number" data-line-number="124"></td> <td id="file-users_controllers-go-LC124" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L125" class="blob-num js-line-number" data-line-number="125"></td> <td id="file-users_controllers-go-LC125" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>user</span> <span class=pl-c1>:=</span> models.<span class=pl-smi>User</span>{}</td> </tr> <tr> <td id="file-users_controllers-go-L126" class="blob-num js-line-number" data-line-number="126"></td> <td id="file-users_controllers-go-LC126" class="blob-code blob-code-inner js-file-line"> </td> </tr> <tr> <td id="file-users_controllers-go-L127" class="blob-num js-line-number" data-line-number="127"></td> <td id="file-users_controllers-go-LC127" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>uid</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>strconv</span>.<span class=pl-en>ParseUint</span>(<span class=pl-s1>vars</span>[<span class=pl-s>&quot;id&quot;</span>], <span class=pl-c1>10</span>, <span class=pl-c1>32</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L128" class="blob-num js-line-number" data-line-number="128"></td> <td id="file-users_controllers-go-LC128" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L129" class="blob-num js-line-number" data-line-number="129"></td> <td id="file-users_controllers-go-LC129" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusBadRequest</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L130" class="blob-num js-line-number" data-line-number="130"></td> <td id="file-users_controllers-go-LC130" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L131" class="blob-num js-line-number" data-line-number="131"></td> <td id="file-users_controllers-go-LC131" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L132" class="blob-num js-line-number" data-line-number="132"></td> <td id="file-users_controllers-go-LC132" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>tokenID</span>, <span class=pl-s1>err</span> <span class=pl-c1>:=</span> <span class=pl-s1>auth</span>.<span class=pl-en>ExtractTokenID</span>(<span class=pl-s1>r</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L133" class="blob-num js-line-number" data-line-number="133"></td> <td id="file-users_controllers-go-LC133" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L134" class="blob-num js-line-number" data-line-number="134"></td> <td id="file-users_controllers-go-LC134" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>, <span class=pl-s1>errors</span>.<span class=pl-en>New</span>(<span class=pl-s>&quot;Unauthorized&quot;</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L135" class="blob-num js-line-number" data-line-number="135"></td> <td id="file-users_controllers-go-LC135" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L136" class="blob-num js-line-number" data-line-number="136"></td> <td id="file-users_controllers-go-LC136" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L137" class="blob-num js-line-number" data-line-number="137"></td> <td id="file-users_controllers-go-LC137" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>tokenID</span> <span class=pl-c1>!=</span> <span class=pl-c1>0</span> <span class=pl-c1>&amp;&amp;</span> <span class=pl-s1>tokenID</span> <span class=pl-c1>!=</span> <span class=pl-en>uint32</span>(<span class=pl-s1>uid</span>) {</td> </tr> <tr> <td id="file-users_controllers-go-L138" class="blob-num js-line-number" data-line-number="138"></td> <td id="file-users_controllers-go-LC138" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>, <span class=pl-s1>errors</span>.<span class=pl-en>New</span>(<span class=pl-s1>http</span>.<span class=pl-en>StatusText</span>(<span class=pl-s1>http</span>.<span class=pl-c1>StatusUnauthorized</span>)))</td> </tr> <tr> <td id="file-users_controllers-go-L139" class="blob-num js-line-number" data-line-number="139"></td> <td id="file-users_controllers-go-LC139" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L140" class="blob-num js-line-number" data-line-number="140"></td> <td id="file-users_controllers-go-LC140" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L141" class="blob-num js-line-number" data-line-number="141"></td> <td id="file-users_controllers-go-LC141" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>_</span>, <span class=pl-s1>err</span> <span class=pl-c1>=</span> <span class=pl-s1>user</span>.<span class=pl-en>DeleteAUser</span>(<span class=pl-s1>server</span>.<span class=pl-c1>DB</span>, <span class=pl-en>uint32</span>(<span class=pl-s1>uid</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L142" class="blob-num js-line-number" data-line-number="142"></td> <td id="file-users_controllers-go-LC142" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>if</span> <span class=pl-s1>err</span> <span class=pl-c1>!=</span> <span class=pl-c1>nil</span> {</td> </tr> <tr> <td id="file-users_controllers-go-L143" class="blob-num js-line-number" data-line-number="143"></td> <td id="file-users_controllers-go-LC143" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>ERROR</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusInternalServerError</span>, <span class=pl-s1>err</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L144" class="blob-num js-line-number" data-line-number="144"></td> <td id="file-users_controllers-go-LC144" class="blob-code blob-code-inner js-file-line"> <span class=pl-k>return</span></td> </tr> <tr> <td id="file-users_controllers-go-L145" class="blob-num js-line-number" data-line-number="145"></td> <td id="file-users_controllers-go-LC145" class="blob-code blob-code-inner js-file-line"> }</td> </tr> <tr> <td id="file-users_controllers-go-L146" class="blob-num js-line-number" data-line-number="146"></td> <td id="file-users_controllers-go-LC146" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>w</span>.<span class=pl-en>Header</span>().<span class=pl-en>Set</span>(<span class=pl-s>&quot;Entity&quot;</span>, <span class=pl-s1>fmt</span>.<span class=pl-en>Sprintf</span>(<span class=pl-s>&quot;%d&quot;</span>, <span class=pl-s1>uid</span>))</td> </tr> <tr> <td id="file-users_controllers-go-L147" class="blob-num js-line-number" data-line-number="147"></td> <td id="file-users_controllers-go-LC147" class="blob-code blob-code-inner js-file-line"> <span class=pl-s1>responses</span>.<span class=pl-en>JSON</span>(<span class=pl-s1>w</span>, <span class=pl-s1>http</span>.<span class=pl-c1>StatusNoContent</span>, <span class=pl-s>&quot;&quot;</span>)</td> </tr> <tr> <td id="file-users_controllers-go-L148" class="blob-num js-line-number" data-line-number="148"></td> <td id="file-users_controllers-go-LC148" class="blob-code blob-code-inner js-file-line">}</td> </tr> </table> </div> </div> </div> </div> <div class="gist-meta"> <a href="https://gist.github.com/victorsteven/aba766010af8b4a3627e68f04634b42e/raw/d35e0b06385f01d994441076c33a819af4e624ed/users_controllers.go" style="float:right">view raw</a> <a href="https://gist.github.com/victorsteven/aba766010af8b4a3627e68f04634b42e#file-users_controllers-go">users_controllers.go</a> hosted with &#10084; by <a href="https://github.com">GitHub</a> </div> </div> </div>